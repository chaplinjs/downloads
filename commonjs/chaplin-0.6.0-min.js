// Generated by CoffeeScript 1.4.0
/*
Chaplin 0.6.0.

Chaplin may be freely distributed under the MIT license.
For all details and documentation:
http://chaplinjs.org
*/(function(){"use strict";var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},t={}.hasOwnProperty,n=function(e,n){function i(){this.constructor=e}for(var r in n)t.call(n,r)&&(e[r]=n[r]);return i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype,e},r=function(e,t){return function(){return e.apply(t,arguments)}},i=[].slice;require.define({jquery:function(e,t,n){return n.exports=$},underscore:function(e,t,n){return n.exports=_},backbone:function(e,t,n){return n.exports=Backbone}}),require.define({"chaplin/application":function(e,t,n){var r,i,s,o,u,a,f;return i=t("backbone"),f=t("chaplin/mediator"),s=t("chaplin/dispatcher"),u=t("chaplin/views/layout"),a=t("chaplin/lib/router"),o=t("chaplin/lib/event_broker"),n.exports=r=function(){function e(){}return e.extend=i.Model.extend,_(e.prototype).extend(o),e.prototype.title="",e.prototype.dispatcher=null,e.prototype.layout=null,e.prototype.router=null,e.prototype.initialize=function(){},e.prototype.initDispatcher=function(e){return this.dispatcher=new s(e)},e.prototype.initLayout=function(e){var t;return e==null&&(e={}),(t=e.title)==null&&(e.title=this.title),this.layout=new u(e)},e.prototype.initRouter=function(e,t){return this.router=new a(t),typeof e=="function"&&e(this.router.match),this.router.startHistory()},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,t,n,r;if(this.disposed)return;t=["dispatcher","layout","router"];for(n=0,r=t.length;n<r;n++){e=t[n];if(this[e]==null)continue;this[e].dispose(),delete this[e]}return this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}()}}),require.define({"chaplin/mediator":function(e,t,n){var r,i,s,o,u;return u=t("underscore"),r=t("backbone"),s=t("chaplin/lib/support"),o=t("chaplin/lib/utils"),i={},i.subscribe=r.Events.on,i.unsubscribe=r.Events.off,i.publish=r.Events.trigger,i._callbacks=null,o.readonly(i,"subscribe","unsubscribe","publish"),i.seal=function(){if(s.propertyDescriptors&&Object.seal)return Object.seal(i)},o.readonly(i,"seal"),n.exports=i}}),require.define({"chaplin/dispatcher":function(t,n,r){var i,s,o,u,a;return a=n("underscore"),i=n("backbone"),u=n("chaplin/lib/utils"),o=n("chaplin/lib/event_broker"),r.exports=s=function(){function t(){this.initialize.apply(this,arguments)}return t.extend=i.Model.extend,a(t.prototype).extend(o),t.prototype.previousControllerName=null,t.prototype.currentControllerName=null,t.prototype.currentController=null,t.prototype.currentAction=null,t.prototype.currentParams=null,t.prototype.url=null,t.prototype.initialize=function(e){return e==null&&(e={}),this.settings=a(e).defaults({controllerPath:"controllers/",controllerSuffix:"_controller"}),this.subscribeEvent("matchRoute",this.matchRoute)},t.prototype.matchRoute=function(e,t,n){return this.startupController(e.controller,e.action,t,n)},t.prototype.startupController=function(e,t,n,r){var i,s;t==null&&(t="index"),n==null&&(n={}),r==null&&(r={}),r.changeURL!==!1&&(r.changeURL=!0),r.forceStartup!==!0&&(r.forceStartup=!1),s=!r.forceStartup&&this.currentControllerName===e&&this.currentAction===t&&(!this.currentParams||a(n).isEqual(this.currentParams));if(s)return;return i=a(this.controllerLoaded).bind(this,e,t,n,r),this.loadController(e,i)},t.prototype.loadController=function(e,t){var r,i;return r=u.underscorize(e)+this.settings.controllerSuffix,i=this.settings.controllerPath+r,(typeof define!="undefined"&&define!==null?define.amd:void 0)?n([i],t):t(n(i))},t.prototype.controllerLoaded=function(e,t,n,r,i){var s,o,u;return o=this.currentControllerName||null,s=new i(n,o),u=s.beforeAction?"executeBeforeActionChain":"executeAction",this[u](s,e,t,n,r)},t.prototype.executeAction=function(e,t,n,r,i){var s,o;o=this.currentControllerName||null,s=this.currentController||null,this.previousControllerName=o,s&&(this.publishEvent("beforeControllerDispose",s),s.dispose(r,t)),e[n](r,o);if(e.redirected)return;return this.currentControllerName=t,this.currentController=e,this.currentAction=n,this.currentParams=r,this.adjustURL(e,r,i),this.publishEvent("startupController",{previousControllerName:this.previousControllerName,controller:this.currentController,controllerName:this.currentControllerName,params:this.currentParams})},t.prototype.executeBeforeActionChain=function(t,n,r,i){var s,o,a,f,l,c,h,p,d,v,m,g=this;f=[],o=arguments,p=u.getPrototypeChain(t),m=p.reverse();for(d=0,v=m.length;d<v;d++){h=m[d],s=h.beforeAction;for(l in s){a=s[l];if(e.call(f,a)<0)if(l===r||RegExp("^"+l+"$").test(r)){typeof a=="string"&&(a=t[a]);if(typeof a!="function")throw new Error("Controller#executeBeforeActionChain: "+(""+a+" is not a valid beforeAction method for "+l+"."));f.push(a)}}}return c=function(e,n){return n==null&&(n=null),t.redirected?g.adjustURL(t,i,{}):e?(n=e.call(t,i,n),n&&typeof n.then=="function"?n.then(function(e){return c(f.shift(),e)}):c(f.shift(),n)):g.executeAction.apply(g,o)},c(f.shift())},t.prototype.adjustURL=function(e,t,n){var r;return typeof n.path=="string"&&(r=n.path),n.changeURL&&this.publishEvent("!router:changeURL",r,n),this.url=r},t.prototype.disposed=!1,t.prototype.dispose=function(){if(this.disposed)return;return this.unsubscribeAllEvents(),this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},t}()}}),require.define({"chaplin/controllers/controller":function(e,n,r){var i,s,o,u;return u=n("underscore"),i=n("backbone"),o=n("chaplin/lib/event_broker"),r.exports=s=function(){function e(){this.initialize.apply(this,arguments)}return e.extend=i.Model.extend,u(e.prototype).extend(i.Events),u(e.prototype).extend(o),e.prototype.view=null,e.prototype.redirected=!1,e.prototype.initialize=function(){},e.prototype.adjustTitle=function(e){return this.publishEvent("!adjustTitle",e)},e.prototype.redirectTo=function(e,t,n){return this.redirected=!0,this.publishEvent("!router:route",e,{},function(e){if(!e)throw new Error("Controller#redirectTo: no route matched")})},e.prototype.redirectToRoute=function(e,t,n){return this.redirected=!0,this.publishEvent("!router:routeByName",e,t,n)},e.prototype.disposed=!1,e.prototype.dispose=function(){var e,n,r,i,s;if(this.disposed)return;for(n in this){if(!t.call(this,n))continue;e=this[n],e&&typeof e.dispose=="function"&&(e.dispose(),delete this[n])}this.unsubscribeAllEvents(),r=["redirected"];for(i=0,s=r.length;i<s;i++)n=r[i],delete this[n];return this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}()}}),require.define({"chaplin/models/collection":function(e,t,r){var i,s,o,u,a;return a=t("underscore"),i=t("backbone"),o=t("chaplin/lib/event_broker"),u=t("chaplin/models/model"),r.exports=s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return n(t,e),a(t.prototype).extend(o),t.prototype.model=u,t.prototype.initDeferred=function(){return a(this).extend($.Deferred())},t.prototype.serialize=function(){var e,t,n,r,i;r=this.models,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],e instanceof u?i.push(e.serialize()):i.push(e.toJSON());return i},t.prototype.addAtomic=function(e,t){var n,r;t==null&&(t={});if(!e.length)return;t.silent=!0,n=typeof t.at=="number"?"pop":"shift";while(r=e[n]())this.add(r,t);return this.trigger("reset")},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,n,r;if(this.disposed)return;this.trigger("dispose",this),this.reset([],{silent:!0}),this.unsubscribeAllEvents(),this.off(),typeof this.reject=="function"&&this.reject(),t=["model","models","_byId","_byCid","_callbacks"];for(n=0,r=t.length;n<r;n++)e=t[n],delete this[e];return this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},t}(i.Collection)}}),require.define({"chaplin/models/model":function(t,r,i){var s,o,u,a,f;return f=r("underscore"),s=r("backbone"),a=r("chaplin/lib/utils"),o=r("chaplin/lib/event_broker"),i.exports=u=function(t){function u(){return u.__super__.constructor.apply(this,arguments)}var r,i;return n(u,t),f(u.prototype).extend(o),u.prototype.initDeferred=function(){return f(this).extend($.Deferred())},u.prototype.getAttributes=function(){return this.attributes},r=function(e,t,n){var r,o,u,f,l,c,h,p;r=a.beget(t),n?n.push(e):n=[e];for(o in t){l=t[o];if(l instanceof s.Model)r[o]=i(l,e,n);else if(l instanceof s.Collection){f=[],p=l.models;for(c=0,h=p.length;c<h;c++)u=p[c],f.push(i(u,e,n));r[o]=f}}return n.pop(),r},i=function(t,n,i){var s;return t===n||e.call(i,t)>=0?null:(s=typeof t.getAttributes=="function"?t.getAttributes():t.attributes,r(t,s,i))},u.prototype.serialize=function(){return r(this,this.getAttributes())},u.prototype.disposed=!1,u.prototype.dispose=function(){var e,t,n,r;if(this.disposed)return;this.trigger("dispose",this),this.unsubscribeAllEvents(),this.off(),typeof this.reject=="function"&&this.reject(),t=["collection","attributes","changed","_escapedAttributes","_previousAttributes","_silent","_pending","_callbacks"];for(n=0,r=t.length;n<r;n++)e=t[n],delete this[e];return this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},u}(s.Model)}}),require.define({"chaplin/views/layout":function(e,t,n){var i,s,o,u,a,f;return i=t("jquery"),f=t("underscore"),s=t("backbone"),a=t("chaplin/lib/utils"),o=t("chaplin/lib/event_broker"),n.exports=u=function(){function e(){this.openLink=r(this.openLink,this),this.initialize.apply(this,arguments)}return e.extend=s.Model.extend,f(e.prototype).extend(o),e.prototype.title="",e.prototype.events={},e.prototype.el=document,e.prototype.$el=i(document),e.prototype.cid="chaplin-layout",e.prototype.initialize=function(e){return e==null&&(e={}),this.title=e.title,this.settings=f(e).defaults({titleTemplate:f.template("<%= subtitle %> â€“ <%= title %>"),openExternalToBlank:!1,routeLinks:"a, .go-to",skipRouting:".noscript",scrollTo:[0,0]}),this.subscribeEvent("beforeControllerDispose",this.hideOldView),this.subscribeEvent("startupController",this.showNewView),this.subscribeEvent("!adjustTitle",this.adjustTitle),this.settings.routeLinks&&this.startLinkRouting(),this.delegateEvents()},e.prototype.delegateEvents=s.View.prototype.delegateEvents,e.prototype.undelegateEvents=s.View.prototype.undelegateEvents,e.prototype.hideOldView=function(e){var t,n;t=this.settings.scrollTo,t&&window.scrollTo(t[0],t[1]),n=e.view;if(n)return n.$el.css("display","none")},e.prototype.showNewView=function(e){var t;t=e.controller.view;if(t)return t.$el.css({display:"block",opacity:1,visibility:"visible"})},e.prototype.adjustTitle=function(e){var t;return e==null&&(e=""),t=this.settings.titleTemplate({title:this.title,subtitle:e}),setTimeout(function(){return document.title=t},50)},e.prototype.startLinkRouting=function(){if(this.settings.routeLinks)return i(document).on("click",this.settings.routeLinks,this.openLink)},e.prototype.stopLinkRouting=function(){if(this.settings.routeLinks)return i(document).off("click",this.settings.routeLinks)},e.prototype.openLink=function(e){var t,n,r,s,o,u,f,l,c,h;if(a.modifierKeyPressed(e))return;n=e.currentTarget,t=i(n),o=n.nodeName==="A",r=t.attr("href")||t.data("href")||null;if(r===null||r===void 0||r===""||r.charAt(0)==="#")return;if(o&&(t.attr("target")==="_blank"||t.attr("rel")==="external"||(c=n.protocol)!=="http:"&&c!=="https:"&&c!=="file:"))return;f=this.settings.skipRouting,l=typeof f;if(l==="function"&&!f(r,n)||l==="string"&&t.is(f))return;s=!o||(h=n.hostname)===location.hostname||h==="";if(!s){this.settings.openExternalToBlank&&(e.preventDefault(),window.open(n.href));return}o?(u=n.pathname+n.search,u.charAt(0)!=="/"&&(u="/"+u)):u=r,this.publishEvent("!router:route",u,{},function(t){t?e.preventDefault():o||(location.href=u)})},e.prototype.disposed=!1,e.prototype.dispose=function(){if(this.disposed)return;return this.stopLinkRouting(),this.unsubscribeAllEvents(),this.undelegateEvents(),delete this.title,this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}()}}),require.define({"chaplin/views/view":function(e,t,r){var i,s,o,u,a,f,l,c;return i=t("jquery"),c=t("underscore"),s=t("backbone"),l=t("chaplin/lib/utils"),u=t("chaplin/lib/event_broker"),a=t("chaplin/models/model"),o=t("chaplin/models/collection"),r.exports=f=function(e){function t(e){this.initialize!==t.prototype.initialize&&l.wrapMethod(this,"initialize"),this.render===t.prototype.render?this.render=c(this.render).bind(this):l.wrapMethod(this,"render"),e&&c(this).extend(c.pick(e,["autoRender","container","containerMethod"])),t.__super__.constructor.apply(this,arguments)}return n(t,e),c(t.prototype).extend(u),t.prototype.autoRender=!1,t.prototype.container=null,t.prototype.containerMethod="append",t.prototype.subviews=null,t.prototype.subviewsByName=null,t.prototype.initialize=function(e){this.subviews=[],this.subviewsByName={},this.model&&this.listenTo(this.model,"dispose",this.dispose),this.collection&&this.listenTo(this.collection,"dispose",this.dispose);if(!this.initializeIsWrapped)return this.afterInitialize()},t.prototype.afterInitialize=function(){if(this.autoRender)return this.render()},t.prototype.delegate=function(e,t,n){var r,i,s,o,u;if(typeof e!="string")throw new TypeError("View#delegate: first argument must be a string");if(arguments.length===2)s=t;else{if(arguments.length!==3)throw new TypeError("View#delegate: only two or three arguments are allowed");u=t;if(typeof u!="string")throw new TypeError("View#delegate: second argument must be a string");s=n}if(typeof s!="function")throw new TypeError("View#delegate: handler argument must be function");return o=function(){var t,n,i,s;i=e.split(" "),s=[];for(t=0,n=i.length;t<n;t++)r=i[t],s.push(""+r+".delegate"+this.cid);return s}.call(this),i=o.join(" "),s=c(s).bind(this),u?this.$el.on(i,u,s):this.$el.on(i,s),s},t.prototype._delegateEvents=function(e){var t,n,r,i,s,o;if(!e&&!(e=getValue(this,"events")))return;o=[];for(n in e){i=e[n],c.isFunction(i)||(i=this[i]);if(!i)throw new Error("Method '"+e[n]+"' does not exist");r=n.match(/^(\S+)\s*(.*)$/),t=r[1],s=r[2],i=c.bind(i,this),t+=".delegateEvents"+this.cid,s===""?o.push(this.$el.bind(t,i)):o.push(this.$el.delegate(s,t,i))}return o},t.prototype.delegateEvents=function(){var e=this;this.undelegateEvents(),c(l.getPrototypeChain(this)).chain().pluck("events").compact().uniq().each(function(t){return e._delegateEvents(t)})},t.prototype.undelegate=function(){return this.$el.unbind(".delegate"+this.cid)},t.prototype.pass=function(e,t){var n=this;return this.listenTo(this.model,"change:"+e,function(e,r){var i;return i=n.$(t),i.is("input, textarea, select, button")?i.val(r):i.text(r)})},t.prototype.subview=function(e,t){if(e&&t)return this.removeSubview(e),this.subviews.push(t),this.subviewsByName[e]=t,t;if(e)return this.subviewsByName[e]},t.prototype.removeSubview=function(e){var t,n,r,i,s,o;if(!e)return;if(typeof e=="string")n=e,s=this.subviewsByName[n];else{s=e,o=this.subviewsByName;for(r in o){i=o[r];if(s===i){n=r;break}}}if(!(n&&s&&s.dispose))return;return s.dispose(),t=c(this.subviews).indexOf(s),t>-1&&this.subviews.splice(t,1),delete this.subviewsByName[n]},t.prototype.getTemplateData=function(){var e,t,n;return n=this.model?this.model instanceof a?this.model.serialize():l.beget(this.model.attributes):this.collection?(e=this.collection instanceof o?this.collection.serialize():this.collection.map(function(e){return l.beget(e.attributes)}),{items:e}):{},t=this.model||this.collection,t&&(typeof t.state=="function"&&!("resolved"in n)&&(n.resolved=t.state()==="resolved"),typeof t.isSynced=="function"&&!("synced"in n)&&(n.synced=t.isSynced())),n},t.prototype.getTemplateFunction=function(){throw new Error("View#getTemplateFunction must be overridden")},t.prototype.render=function(){var e,t;return this.disposed?!1:(t=this.getTemplateFunction(),typeof t=="function"&&(e=t(this.getTemplateData()),this.$el.empty().append(e)),this.renderIsWrapped||this.afterRender(),this)},t.prototype.afterRender=function(){if(this.container)return i(this.container)[this.containerMethod](this.el),this.trigger("addedToDOM")},t.prototype.disposed=!1,t.prototype.dispose=function(){var e,t,n,r,i,s,o,u;if(this.disposed)return;if(this.subviews==null)throw new Error("Your `initialize` method must include a super call to        Chaplin `initialize`");u=this.subviews;for(r=0,s=u.length;r<s;r++)n=u[r],n.dispose();this.unsubscribeAllEvents(),this.stopListening(),this.off(),this.$el.remove(),t=["el","$el","options","model","collection","subviews","subviewsByName","_callbacks"];for(i=0,o=t.length;i<o;i++)e=t[i],delete this[e];return this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},t}(s.View)}}),require.define({"chaplin/views/collection_view":function(e,i,s){var o,u,a,f;return o=i("jquery"),f=i("underscore"),a=i("chaplin/views/view"),s.exports=u=function(e){function i(e){this.renderAllItems=r(this.renderAllItems,this),this.showHideFallback=r(this.showHideFallback,this),this.itemsResetted=r(this.itemsResetted,this),this.itemRemoved=r(this.itemRemoved,this),this.itemAdded=r(this.itemAdded,this),e&&f(this).extend(f.pick(e,["renderItems","itemView"])),i.__super__.constructor.apply(this,arguments)}return n(i,e),i.prototype.itemView=null,i.prototype.autoRender=!0,i.prototype.renderItems=!0,i.prototype.animationDuration=500,i.prototype.useCssAnimation=!1,i.prototype.listSelector=null,i.prototype.$list=null,i.prototype.fallbackSelector=null,i.prototype.$fallback=null,i.prototype.loadingSelector=null,i.prototype.$loading=null,i.prototype.itemSelector=null,i.prototype.filterer=null,i.prototype.filterCallback=function(e,t){var n;return n=t?"":"none",e.$el.stop(!0,!0).css("display",n)},i.prototype.visibleItems=null,i.prototype.initialize=function(e){e==null&&(e={}),i.__super__.initialize.apply(this,arguments),this.visibleItems=[],this.addCollectionListeners();if(e.filterer!=null)return this.filter(e.filterer)},i.prototype.addCollectionListeners=function(){return this.listenTo(this.collection,"add",this.itemAdded),this.listenTo(this.collection,"remove",this.itemRemoved),this.listenTo(this.collection,"reset sort",this.itemsResetted)},i.prototype.getTemplateData=function(){var e;return e={length:this.collection.length},typeof this.collection.state=="function"&&(e.resolved=this.collection.state()==="resolved"),typeof this.collection.isSynced=="function"&&(e.synced=this.collection.isSynced()),e},i.prototype.getTemplateFunction=function(){},i.prototype.render=function(){i.__super__.render.apply(this,arguments),this.$list=this.listSelector?this.$(this.listSelector):this.$el,this.initFallback(),this.initLoadingIndicator();if(this.renderItems)return this.renderAllItems()},i.prototype.itemAdded=function(e,t,n){return n==null&&(n={}),this.renderAndInsertItem(e,n.index)},i.prototype.itemRemoved=function(e){return this.removeViewForItem(e)},i.prototype.itemsResetted=function(){return this.renderAllItems()},i.prototype.initFallback=function(){if(!this.fallbackSelector)return;return this.$fallback=this.$(this.fallbackSelector),this.on("visibilityChange",this.showHideFallback),this.listenTo(this.collection,"syncStateChange",this.showHideFallback),this.showHideFallback()},i.prototype.showHideFallback=function(){var e;return e=this.visibleItems.length===0&&(typeof this.collection.isSynced=="function"?this.collection.isSynced():!0),this.$fallback.css("display",e?"block":"none")},i.prototype.initLoadingIndicator=function(){if(!this.loadingSelector||typeof this.collection.isSyncing!="function")return;return this.$loading=this.$(this.loadingSelector),this.listenTo(this.collection,"syncStateChange",this.showHideLoadingIndicator),this.showHideLoadingIndicator()},i.prototype.showHideLoadingIndicator=function(){var e;return e=this.collection.length===0&&this.collection.isSyncing(),this.$loading.css("display",e?"block":"none")},i.prototype.getItemViews=function(){var e,t,n,r;e={},r=this.subviewsByName;for(t in r)n=r[t],t.slice(0,9)==="itemView:"&&(e[t.slice(9)]=n);return e},i.prototype.filter=function(e,t){var n,r,i,s,o,u,a;this.filterer=e,t&&(this.filterCallback=t),t==null&&(t=this.filterCallback);if(!f(this.getItemViews()).isEmpty()){a=this.collection.models;for(r=o=0,u=a.length;o<u;r=++o){i=a[r],n=typeof e=="function"?e(i,r):!0,s=this.subview("itemView:"+i.cid);if(!s)throw new Error("CollectionView#filter: "+("no view found for "+i.cid));this.filterCallback(s,n),this.updateVisibleItems(s.model,n,!1)}}return this.trigger("visibilityChange",this.visibleItems)},i.prototype.renderAllItems=function(){var e,n,r,i,s,o,u,a,f,l,c;i=this.collection.models,this.visibleItems=[],s={};for(u=0,f=i.length;u<f;u++)r=i[u],o=this.subview("itemView:"+r.cid),o&&(s[r.cid]=o);c=this.getItemViews();for(e in c){if(!t.call(c,e))continue;o=c[e],e in s||this.removeSubview("itemView:"+e)}for(n=a=0,l=i.length;a<l;n=++a)r=i[n],o=this.subview("itemView:"+r.cid),o?this.insertView(r,o,n,!1):this.renderAndInsertItem(r,n);if(!i.length)return this.trigger("visibilityChange",this.visibleItems)},i.prototype.renderAndInsertItem=function(e,t){var n;return n=this.renderItem(e),this.insertView(e,n,t)},i.prototype.renderItem=function(e){var t;return t=this.subview("itemView:"+e.cid),t||(t=this.getView(e),this.subview("itemView:"+e.cid,t)),t.render(),t},i.prototype.getView=function(e){if(this.itemView)return new this.itemView({model:e});throw new Error("The CollectionView#itemView property must be defined or the getView() must be overridden.")},i.prototype.insertView=function(e,t,n,r){var i,s,o,u,a,f,l,c,h,p=this;n==null&&(n=null),r==null&&(r=!0),c=typeof n=="number"?n:this.collection.indexOf(e),f=typeof this.filterer=="function"?this.filterer(e,c):!0,h=t.el,u=t.$el,f?r&&(this.useCssAnimation?u.addClass("animated-item-view"):u.css("opacity",0)):this.filterCallback(t,f),i=this.$list,a=this.itemSelector?i.children(this.itemSelector):i.children(),a.get(c)!==h&&(l=a.length,l===0||c===l?i.append(h):c===0?(s=a.eq(c),s.before(h)):(o=a.eq(c-1),o.after(h))),t.trigger("addedToDOM"),this.updateVisibleItems(e,f),r&&f&&(this.useCssAnimation?setTimeout(function(){return u.addClass("animated-item-view-end")},0):u.animate({opacity:1},this.animationDuration))},i.prototype.removeViewForItem=function(e){return this.updateVisibleItems(e,!1),this.removeSubview("itemView:"+e.cid)},i.prototype.updateVisibleItems=function(e,t,n){var r,i,s;return n==null&&(n=!0),i=!1,s=f(this.visibleItems).indexOf(e),r=s>-1,t&&!r?(this.visibleItems.push(e),i=!0):!t&&r&&(this.visibleItems.splice(s,1),i=!0),i&&n&&this.trigger("visibilityChange",this.visibleItems),i},i.prototype.dispose=function(){var e,t,n,r;if(this.disposed)return;t=["$list","$fallback","$loading","visibleItems"];for(n=0,r=t.length;n<r;n++)e=t[n],delete this[e];return i.__super__.dispose.apply(this,arguments)},i}(a)}}),require.define({"chaplin/lib/route":function(e,n,i){var s,o,u,a,f;return f=n("underscore"),s=n("backbone"),u=n("chaplin/lib/event_broker"),o=n("chaplin/controllers/controller"),i.exports=a=function(){function l(e,t,n,i){this.pattern=e,this.controller=t,this.action=n,this.options=i!=null?i:{},this.handler=r(this.handler,this),this.addParamName=r(this.addParamName,this),this.options.name!=null&&(this.name=this.options.name),this.paramNames=[];if(f(o.prototype).has(this.action))throw new Error("Route: You should not use existing controller properties as action names");this.createRegExp()}var e,n,i,a;return l.extend=s.Model.extend,f(l.prototype).extend(u),a=["path","changeURL"],e=/[-[\]{}()+?.,\\^$|#\s]/g,n="&",i="=",l.prototype.reverse=function(e){var t,n,r,i,s,o,u,a;i=this.pattern;if(f.isRegExp(i))return!1;r="Route#reverse: Not enough parameters to reverse";if(f.isArray(e)){if(e.length<this.paramNames.length)throw new Error(r);t=0,i=i.replace(/[:*][^\/\?]+/g,function(n){var r;return r=e[t],t+=1,r})}else{a=this.paramNames;for(o=0,u=a.length;o<u;o++){n=a[o],s=e[n];if(s===void 0)throw new Error(r);i=i.replace(RegExp("[:*]"+n,"g"),s)}}return this.test(i)?i:!1},l.prototype.createRegExp=function(){var t;if(f.isRegExp(this.pattern)){this.regExp=this.pattern,f.isArray(this.options.names)&&(this.paramNames=this.options.names);return}return t=this.pattern.replace(e,"\\$&").replace(/(?::|\*)(\w+)/g,this.addParamName),this.regExp=RegExp("^"+t+"(?=\\?|$)")},l.prototype.addParamName=function(e,t){if(f(a).include(t))throw new Error("Route#addParamName: parameter name "+t+" is reserved");return this.paramNames.push(t),e.charAt(0)===":"?"([^/?]+)":"(.*?)"},l.prototype.test=function(e){var n,r,i,s,o;i=this.regExp.test(e);if(!i)return!1;r=this.options.constraints;if(r){o=this.extractParams(e);for(s in r){if(!t.call(r,s))continue;n=r[s];if(!n.test(o[s]))return!1}}return!0},l.prototype.handler=function(e,t){var n;return t==null&&(t={}),n=this.buildParams(e),t.path=e,this.publishEvent("matchRoute",this,n,t)},l.prototype.buildParams=function(e){return f.extend({},this.extractQueryParams(e),this.extractParams(e),this.options.params)},l.prototype.extractParams=function(e){var t,n,r,i,s,o,u,a;s={},r=this.regExp.exec(e),a=r.slice(1);for(t=o=0,u=a.length;o<u;t=++o)n=a[t],i=this.paramNames.length?this.paramNames[t]:t,s[i]=n;return s},l.prototype.extractQueryParams=function(e){var t,r,s,o,u,a,f,l,c,h,p,d;a={},l=/\?(.+?)(?=#|$)/,s=l.exec(e);if(!s)return a;f=s[1],u=f.split(n);for(h=0,p=u.length;h<p;h++){o=u[h];if(!o.length)continue;d=o.split(i),r=d[0],c=d[1];if(!r.length)continue;r=decodeURIComponent(r),c=decodeURIComponent(c),t=a[r],t?t.push?t.push(c):a[r]=[t,c]:a[r]=c}return a},l}()}}),require.define({"chaplin/lib/router":function(e,t,n){var i,s,o,u,a,f;return f=t("underscore"),i=t("backbone"),a=t("chaplin/mediator"),s=t("chaplin/lib/event_broker"),o=t("chaplin/lib/route"),n.exports=u=function(){function e(e){this.options=e!=null?e:{},this.route=r(this.route,this),this.match=r(this.match,this),f(this.options).defaults({pushState:!0}),this.subscribeEvent("!router:route",this.routeHandler),this.subscribeEvent("!router:routeByName",this.routeByNameHandler),this.subscribeEvent("!router:reverse",this.reverseHandler),this.subscribeEvent("!router:changeURL",this.changeURLHandler),this.createHistory()}return e.extend=i.Model.extend,f(e.prototype).extend(s),e.prototype.createHistory=function(){return i.history||(i.history=new i.History)},e.prototype.startHistory=function(){return i.history.start(this.options)},e.prototype.stopHistory=function(){if(i.History.started)return i.history.stop()},e.prototype.match=function(e,t,n){var r,s,u,a;n==null&&(n={});if(arguments.length===2&&typeof t=="object"){n=t,s=n.controller,r=n.action;if(!s||!r)throw new Error("Router#match must receive either target or options.controller & options.action")}else{s=n.controller,r=n.action;if(s||r)throw new Error("Router#match cannot use both target and options.controller / action");a=t.split("#"),s=a[0],r=a[1]}return u=new o(e,s,r,n),i.history.handlers.push({route:u,callback:u.handler}),u},e.prototype.route=function(e,t){var n,r,s,o;t==null&&(t={}),f(t).defaults({changeURL:!0}),e=e.replace(/^(\/#|\/)/,""),o=i.history.handlers;for(r=0,s=o.length;r<s;r++){n=o[r];if(n.route.test(e))return n.callback(e,t),!0}return!1},e.prototype.reverseHandler=function(e,t,n){return n(this.reverse(e,t))},e.prototype.reverse=function(e,t){var n,r,s,o,u;u=i.history.handlers;for(s=0,o=u.length;s<o;s++){n=u[s];if(n.route.name!==e)continue;r=n.route.reverse(t);if(r!==!1)return r}return!1},e.prototype.routeHandler=function(e,t,n){var r;return arguments.length===2&&typeof t=="function"&&(n=t,t={}),r=this.route(e,t),typeof n=="function"?n(r):void 0},e.prototype.routeByNameHandler=function(e,t,n){var r;arguments.length===2&&typeof t=="function"&&(n=t,t={}),r=this.reverse(e,t);if(!r)return;return this.routeHandler(r,n)},e.prototype.changeURL=function(e,t){var n;return t==null&&(t={}),n={trigger:t.trigger===!0,replace:t.replace===!0},i.history.navigate(e,n)},e.prototype.changeURLHandler=function(e,t){return this.changeURL(e,t)},e.prototype.disposed=!1,e.prototype.dispose=function(){if(this.disposed)return;return this.stopHistory(),delete i.history,this.unsubscribeAllEvents(),this.disposed=!0,typeof Object.freeze=="function"?Object.freeze(this):void 0},e}()}}),require.define({"chaplin/lib/delayer":function(e,t,n){var r;return r={setTimeout:function(e,t,n){var r,i,s,o=this;return(s=this.timeouts)==null&&(this.timeouts={}),this.clearTimeout(e),i=function(){return delete o.timeouts[e],n()},r=setTimeout(i,t),this.timeouts[e]=r,r},clearTimeout:function(e){if(!this.timeouts||this.timeouts[e]==null)return;clearTimeout(this.timeouts[e]),delete this.timeouts[e]},clearAllTimeouts:function(){var e,t,n;if(!this.timeouts)return;n=this.timeouts;for(t in n)e=n[t],this.clearTimeout(t)},setInterval:function(e,t,n){var r,i;return this.clearInterval(e),(i=this.intervals)==null&&(this.intervals={}),r=setInterval(n,t),this.intervals[e]=r,r},clearInterval:function(e){if(!this.intervals||!this.intervals[e])return;clearInterval(this.intervals[e]),delete this.intervals[e]},clearAllIntervals:function(){var e,t,n;if(!this.intervals)return;n=this.intervals;for(t in n)e=n[t],this.clearInterval(t)},clearDelayed:function(){this.clearAllTimeouts(),this.clearAllIntervals()}},typeof Object.freeze=="function"&&Object.freeze(r),n.exports=r}}),require.define({"chaplin/lib/event_broker":function(e,t,n){var r,s;return s=t("chaplin/mediator"),r={subscribeEvent:function(e,t){if(typeof e!="string")throw new TypeError("EventBroker#subscribeEvent: type argument must be a string");if(typeof t!="function")throw new TypeError("EventBroker#subscribeEvent: handler argument must be a function");return s.unsubscribe(e,t,this),s.subscribe(e,t,this)},unsubscribeEvent:function(e,t){if(typeof e!="string")throw new TypeError("EventBroker#unsubscribeEvent: type argument must be a string");if(typeof t!="function")throw new TypeError("EventBroker#unsubscribeEvent: handler argument must be a function");return s.unsubscribe(e,t)},unsubscribeAllEvents:function(){return s.unsubscribe(null,null,this)},publishEvent:function(){var e,t;t=arguments[0],e=2<=arguments.length?i.call(arguments,1):[];if(typeof t!="string")throw new TypeError("EventBroker#publishEvent: type argument must be a string");return s.publish.apply(s,[t].concat(i.call(e)))}},typeof Object.freeze=="function"&&Object.freeze(r),n.exports=r}}),require.define({"chaplin/lib/support":function(e,t,n){var r;return r={propertyDescriptors:function(){var e;if(typeof Object.defineProperty!="function"||typeof Object.defineProperties!="function")return!1;try{return e={},Object.defineProperty(e,"foo",{value:"bar"}),e.foo==="bar"}catch(t){return!1}}()},n.exports=r}}),require.define({"chaplin/lib/sync_machine":function(e,t,n){var r,i,s,o,u,a,f,l,c,h;u="unsynced",s="syncing",i="synced",r="syncStateChange",o={_syncState:u,_previousSyncState:null,syncState:function(){return this._syncState},isUnsynced:function(){return this._syncState===u},isSynced:function(){return this._syncState===i},isSyncing:function(){return this._syncState===s},unsync:function(){var e;if((e=this._syncState)===s||e===i)this._previousSync=this._syncState,this._syncState=u,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState)},beginSync:function(){var e;if((e=this._syncState)===u||e===i)this._previousSync=this._syncState,this._syncState=s,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState)},finishSync:function(){this._syncState===s&&(this._previousSync=this._syncState,this._syncState=i,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))},abortSync:function(){this._syncState===s&&(this._syncState=this._previousSync,this._previousSync=this._syncState,this.trigger(this._syncState,this,this._syncState),this.trigger(r,this,this._syncState))}},h=[u,s,i,r],f=function(e){return o[e]=function(t,n){n==null&&(n=this),this.on(e,t,n);if(this._syncState===e)return t.call(n)}};for(l=0,c=h.length;l<c;l++)a=h[l],f(a);return typeof Object.freeze=="function"&&Object.freeze(o),n.exports=o}}),require.define({"chaplin/lib/utils":function(e,t,n){var r,s;return r=t("chaplin/lib/support"),s={beget:function(){var e;return typeof Object.create=="function"?Object.create:(e=function(){},function(t){return e.prototype=t,new e})}(),readonly:function(){var e;return r.propertyDescriptors?(e={writable:!1,enumerable:!0,configurable:!1},function(){var t,n,r,s,o;t=arguments[0],r=2<=arguments.length?i.call(arguments,1):[];for(s=0,o=r.length;s<o;s++)n=r[s],e.value=t[n],Object.defineProperty(t,n,e);return!0}):function(){return!1}}(),getPrototypeChain:function(e){var t,n;t=[e];while(e=(n=e.constructor)!=null?n.__super__:void 0)t.push(e);return t},wrapMethod:function(e,t){var n;return n=e[t],e[""+t+"IsWrapped"]=!0,e[t]=function(){return e.disposed?!1:(n.apply(e,arguments
),e["after"+s.upcase(t)].apply(e,arguments),e)}},upcase:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},underscorize:function(e){return e.replace(/[A-Z]/g,function(e,t){return(t!==0?"_":"")+e.toLowerCase()})},modifierKeyPressed:function(e){return e.shiftKey||e.altKey||e.ctrlKey||e.metaKey}},typeof Object.seal=="function"&&Object.seal(s),n.exports=s}}),require.define({chaplin:function(e,t,n){var r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y;return r=t("chaplin/application"),m=t("chaplin/mediator"),a=t("chaplin/dispatcher"),o=t("chaplin/controllers/controller"),i=t("chaplin/models/collection"),c=t("chaplin/models/model"),l=t("chaplin/views/layout"),v=t("chaplin/views/view"),s=t("chaplin/views/collection_view"),h=t("chaplin/lib/route"),p=t("chaplin/lib/router"),u=t("chaplin/lib/delayer"),f=t("chaplin/lib/event_broker"),g=t("chaplin/lib/support"),d=t("chaplin/lib/sync_machine"),y=t("chaplin/lib/utils"),n.exports={Application:r,mediator:m,Dispatcher:a,Controller:o,Collection:i,Model:c,Layout:l,View:v,CollectionView:s,Route:h,Router:p,Delayer:u,EventBroker:f,support:g,SyncMachine:d,utils:y}}})}).call(this);